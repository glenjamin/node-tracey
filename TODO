Stricter types
Full unit tests - how to check paths?
optionally inject stack capturing function?
